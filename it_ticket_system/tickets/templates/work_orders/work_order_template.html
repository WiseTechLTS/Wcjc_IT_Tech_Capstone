<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work Order - {{ ticket.title }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }
        .work-order {
            max-width: 800px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .work-order header {
            text-align: center;
            margin-bottom: 20px;
        }
        .work-order .section {
            margin-bottom: 20px;
        }
        .work-order .section h4 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        .work-order .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #555;
        }
    </style>
</head>

<body>
    <div class="work-order">
        <header>
            <h1>Telecommunications Designs</h1>
            <p>1650 Northpoint Parkway Suite F, Santa Rosa, CA 95407</p>
            <p>Phone: (707) 303-8200 | Fax: (707) 303-8299</p>
        </header>

        <form method="POST" action="/submit-work-order/">
            {% csrf_token %}

            <div class="section">
                <h4>Service Order</h4>
                <div class="mb-3">
                    <label for="service-number" class="form-label"><strong>Number:</strong></label>
                    <input type="text" id="service-number" name="ticket_id" class="form-control" value="{{ ticket.ticket_id }}" readonly>
                </div>
                <div class="mb-3">
                    <label for="date" class="form-label"><strong>Date:</strong></label>
                    <input type="text" id="date" name="created_at" class="form-control" value="{{ ticket.created_at|date:'F d, Y H:i' }}" readonly>
                </div>
                <div class="mb-3">
                    <label for="priority" class="form-label"><strong>Priority:</strong></label>
                    <input type="text" id="priority" name="status" class="form-control" value="{{ ticket.status }}" readonly>
                </div>
            </div>

            <div class="section">
                <h4>Work Requested</h4>
                <textarea class="form-control" name="description" rows="5" readonly>{{ ticket.description }}</textarea>
            </div>

            <div class="section">
                <h4>Customer Information</h4>
                <div class="mb-3">
                    <label for="email" class="form-label"><strong>Submitted By:</strong></label>
                    <input type="email" id="email" name="email" class="form-control" value="{{ ticket.email }}" readonly>
                </div>
                {% if ticket.attachment %}
                <div class="mb-3">
                    <label for="attachment" class="form-label"><strong>Attachment:</strong></label>
                    <a href="{{ ticket.attachment.url }}" target="_blank" class="btn btn-link">Download</a>
                </div>
                {% endif %}
            </div>

            <div class="section">
                <h4>Work Performed</h4>
                <textarea class="form-control" name="work_performed" rows="5" placeholder="Describe work performed..." required></textarea>
            </div>

            <div class="section">
                <h4>Parts Used</h4>
                <textarea class="form-control" name="parts_used" rows="3" placeholder="List parts used and quantities..."></textarea>
            </div>

            <div class="section">
                <h4>Signatures</h4>
                <div class="row">
                    <div class="col">
                        <div class="mb-3">
                            <label for="technician-signature" class="form-label"><strong>Technician's Signature:</strong></label>
                            <input type="text" id="technician-signature" name="technician_signature" class="form-control" placeholder="Technician's Name" required>
                        </div>
                        <div class="mb-3">
                            <label for="on-site-hours" class="form-label"><strong>On Site Hours:</strong></label>
                            <input type="text" id="on-site-hours" name="on_site_hours" class="form-control" placeholder="Hours spent on site">
                        </div>
                    </div>
                    <div class="col">
                        <div class="mb-3">
                            <label for="customer-signature" class="form-label"><strong>Customer's Signature:</strong></label>
                            <input type="text" id="customer-signature" name="customer_signature" class="form-control" placeholder="Customer's Name" required>
                        </div>
                        <div class="mb-3">
                            <label for="date-completed" class="form-label"><strong>Date Completed:</strong></label>
                            <input type="date" id="date-completed" name="date_completed" class="form-control">
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="start-time" class="form-label"><strong>Start Time:</strong></label>
                    <input type="time" id="start-time" name="start_time" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="stop-time" class="form-label"><strong>Stop Time:</strong></label>
                    <input type="time" id="stop-time" name="stop_time" class="form-control">
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100">Submit Work Order</button>
        </form>

        <footer class="footer">
            <p>Note: You MUST call in from the jobsite after you have completed the work and report the status of the project.</p>
            <p>Contact Telecommunications Designs at (707) 303-8200 for assistance.</p>
        </footer>
    </div>
</body>

</html>
